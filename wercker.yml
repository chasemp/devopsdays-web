box: debian
build:
  steps:
    - arjen/hugo-build:
        version: 0.15
        theme: devopsdays-responsive
        flags: --buildDrafts=false
    - samueldebruyn/minify:
        base_dir: public
        css: false
        js: false
        only_on_branches: master
  after-steps:
    - wantedly/pretty-slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL

deploy:
  steps:
    - script:
        name: Install packages
        code: |
          apt-get update
    - install-packages:
        packages: git ssh-client

    - burrbd/gh-pages@0.2.3:
        token: $GIT_TOKEN
        domain: www.devopsdays.org
        basedir: public
        repo: devopsdays/devopsdays.github.io
  after-steps:
    - wantedly/pretty-slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL
